(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"+P1L":function(e,t,n){"use strict";n.r(t);var r=n("vTDv"),a=n("tyNb"),i=n("fXoL");let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["users"]],decls:1,vars:0,template:function(e,t){1&e&&i["\u0275\u0275element"](0,"router-outlet")},directives:[a.h],encapsulation:2}),e})();var s=n("YPVp"),o=n("CdOr"),d=n("5giZ"),p=n("QNOW"),u=n("aceb"),c=n("RS3s"),m=n("sYmb");let g=(()=>{class e extends s.a{constructor(e,t,n){super(t),this.client=e,this.coreService=t,this.route=n,this.columns=[{key:"name",translation_key:"USER.NAME.LABEL",column:{title:"",type:"string"}},{key:"email",translation_key:"USER.EMAIL.LABEL",column:{title:"",type:"string"}}],this.editPageUrl="pages/users/edit",this.actionSettings={actions:{columnTitle:"Action",position:"right",add:!1}}}ngOnInit(){super.ngOnInit(this.client.getBaseEndpoint())}delete(e){if(1===e.data.id)return this.coreService.toastService.showToast(p.b.DANGER,"Failed","Cannot delete administrator"),void(this.loading=!1);super.delete(e)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["list"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"settings","source","delete","edit"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"nb-card"),i["\u0275\u0275elementStart"](1,"nb-card-header"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"nb-card-body",0),i["\u0275\u0275elementStart"](5,"ng2-smart-table",1),i["\u0275\u0275listener"]("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.edit(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,4,"USER.LABELS.LIST")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("nbSpinner",t.loading),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("settings",t.settings)("source",t.source))},directives:[u.o,u.q,u.n,u.bb,c.b],pipes:[m.c],styles:[".nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translateZ(0)}"]}),e})();var h=n("lJxs");n("HxAg");class b{}class E{constructor(){this.mobile_verified=0}}class v{}var f=n("3Pt+"),S=n("ofXK");function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"label",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}function R(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"label",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}function x(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"label",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}function M(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"label",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}function y(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"label",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}function B(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"nb-option",26),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",e.name),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.formatRole(e.name))}}function w(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"label",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}function L(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"label",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}function O(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"label",25),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e)}}let q=(()=>{class e{constructor(e,t,n){this.client=e,this.coreService=t,this.route=n,this.user=new b,this.userRoles=[],this.userRequest=new E,this.userError=new v,this.showProgress=!1,this.showProgressButton=!1,this.isEdit=!1,this.editId=null}ngOnInit(){this.getRoles().subscribe(),this.getEditData()}getRoles(){return this.client.roles().pipe(Object(h.a)(e=>(this.userRoles=e,e)))}getEditData(){let e=this.route.snapshot.paramMap.get("id");e&&(this.isEdit=!0,this.editId=e,this.getDataById(e).subscribe())}getDataById(e){return this.showProgress=!0,this.client.show(e).pipe(Object(h.a)(e=>{this.showProgress=!1,this.user=e,this.userRequest.name=this.user.name,this.userRequest.email=this.user.email,this.userRequest.mobile_number=this.user.mobile_number,this.userRequest.roles=[];let t=[];for(let n=0;n<this.user.roles.length;n++)t.push(this.user.roles[n].name);return this.userRequest.roles=t,this.userRequest.language=this.user.language,this.userRequest.mobile_verified=this.user.mobile_verified,e}))}saveUser(){this.showProgressButton=!0;const e=new FormData;e.append("name",this.userRequest.name),e.append("email",this.userRequest.email),e.append("mobile_number",this.userRequest.mobile_number),e.append("password",this.userRequest.password),e.append("mobile_verified",String(this.userRequest.mobile_verified)),e.append("language",this.userRequest.language);for(let t=0;t<this.userRequest.roles.length;t++)e.append("roles[]",this.userRequest.roles[t]);this.userRequest.image&&e.append("image",this.userRequest.image),(this.isEdit?this.client.update(this.editId,e):this.client.store(e)).subscribe(e=>{this.showProgressButton=!1,this.coreService.toastService.showToast(p.b.SUCCESS,"Saved","Saved successfully!"),this.back()},e=>{this.showProgressButton=!1,this.coreService.toastService.showToast(p.b.DANGER,"Failed",e.error.message),e.error.errors&&(e.error.errors.name&&(this.userError.name=e.error.errors.name),e.error.errors.image&&(this.userError.image=e.error.errors.image),e.error.errors.email&&(this.userError.email=e.error.errors.email),e.error.errors.mobile_number&&(this.userError.mobile_number=e.error.errors.mobile_number),e.error.errors.password&&(this.userError.password=e.error.errors.password),e.error.errors.roles&&(this.userError.roles=e.error.errors.role))})}back(){this.coreService.location.back()}formatRole(e){return e}onMobileVerifiedChange(e){this.userRequest.mobile_verified=e?1:0}onImageChanged(e){this.userRequest.image=e.target.files[0]}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["save"]],decls:85,vars:73,consts:[[1,"row"],[1,"col-md-12"],["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["type","text","nbInput","","fullWidth","","placeholder","Name","name","name","required","",3,"ngModel","ngModelChange"],["name","ngModel"],[1,"error","text-danger",3,"hidden"],["class","error text-danger",4,"ngFor","ngForOf"],["type","email","nbInput","","fullWidth","","placeholder","Email","name","email","required","",3,"ngModel","ngModelChange"],["email","ngModel"],["type","mobile_number","nbInput","","fullWidth","","placeholder","Mobile Number","name","mobile_number","required","",3,"ngModel","ngModelChange"],["mobile_number","ngModel"],["name","mobile_verified","nbInput","","fullWidth","",1,"form-control",3,"checked","change"],["type","password","nbInput","","fullWidth","","id","password","placeholder","Password","name","password",3,"ngModel","required","ngModelChange"],["password","ngModel"],["fullWidth","","name","roles","multiple","",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],["roles","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","file","nbInput","","fullWidth","",3,"change"],["type","language","nbInput","","fullWidth","","placeholder","Language","name","language","required","",3,"ngModel","ngModelChange"],["language","ngModel"],["type","submit","nbButton","","status","success","size","medium","nbSpinnerStatus","success","nbSpinnerSize","small",3,"disabled","nbSpinner"],["type","button","nbButton","","status","danger","size","medium",3,"click"],[1,"error","text-danger"],[3,"value"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"nb-card"),i["\u0275\u0275elementStart"](3,"nb-card-body",2),i["\u0275\u0275elementStart"](4,"form",3,4),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.saveUser()})),i["\u0275\u0275elementStart"](6,"div",5),i["\u0275\u0275elementStart"](7,"label"),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"input",6,7),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.userRequest.name=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"label",8),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](15,I,2,1,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div",5),i["\u0275\u0275elementStart"](17,"label"),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"input",10,11),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.userRequest.email=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"label",8),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](25,R,2,1,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"div",5),i["\u0275\u0275elementStart"](27,"label"),i["\u0275\u0275text"](28),i["\u0275\u0275pipe"](29,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](30,"input",12,13),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.userRequest.mobile_number=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"label",8),i["\u0275\u0275text"](33),i["\u0275\u0275pipe"](34,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](35,x,2,1,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"div",5),i["\u0275\u0275elementStart"](37,"label"),i["\u0275\u0275text"](38),i["\u0275\u0275pipe"](39,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](40,"nb-checkbox",14),i["\u0275\u0275listener"]("change",(function(e){return t.onMobileVerifiedChange(e.target.checked)})),i["\u0275\u0275text"](41),i["\u0275\u0275pipe"](42,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](43,M,2,1,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](44,"div",5),i["\u0275\u0275elementStart"](45,"label"),i["\u0275\u0275text"](46),i["\u0275\u0275pipe"](47,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](48,"input",15,16),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.userRequest.password=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](50,"label",8),i["\u0275\u0275text"](51),i["\u0275\u0275pipe"](52,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](53,y,2,1,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](54,"div",5),i["\u0275\u0275elementStart"](55,"label"),i["\u0275\u0275text"](56),i["\u0275\u0275pipe"](57,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](58,"nb-select",17,18),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.userRequest.roles=e})),i["\u0275\u0275template"](60,B,2,2,"nb-option",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](61,w,2,1,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](62,"div",5),i["\u0275\u0275elementStart"](63,"label"),i["\u0275\u0275text"](64),i["\u0275\u0275pipe"](65,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](66,"input",20),i["\u0275\u0275listener"]("change",(function(e){return t.onImageChanged(e)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](67,L,2,1,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](68,"div",5),i["\u0275\u0275elementStart"](69,"label"),i["\u0275\u0275text"](70),i["\u0275\u0275pipe"](71,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](72,"input",21,22),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.userRequest.language=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](74,"label",8),i["\u0275\u0275text"](75),i["\u0275\u0275pipe"](76,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](77,O,2,1,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](78,"button",23),i["\u0275\u0275text"](79),i["\u0275\u0275pipe"](80,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](81," \xa0 "),i["\u0275\u0275elementStart"](82,"button",24),i["\u0275\u0275listener"]("click",(function(){return t.back()})),i["\u0275\u0275text"](83),i["\u0275\u0275pipe"](84,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275reference"](5),n=i["\u0275\u0275reference"](11),r=i["\u0275\u0275reference"](21),a=i["\u0275\u0275reference"](31),l=i["\u0275\u0275reference"](49),s=i["\u0275\u0275reference"](73);i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("nbSpinner",t.showProgress),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,41,"USER.NAME.LABEL")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.userRequest.name),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",n.valid||n.pristine),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](14,43,"USER.NAME.VALIDATION")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.userError.name),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](19,45,"USER.EMAIL.LABEL")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.userRequest.email),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",r.valid||r.pristine),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](24,47,"USER.EMAIL.VALIDATION")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.userError.email),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](29,49,"USER.MOBILE_NUMBER.LABEL")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.userRequest.mobile_number),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",a.valid||a.pristine),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](34,51,"USER.MOBILE_NUMBER.VALIDATION")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.userError.mobile_number),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](39,53,"USER.MOBILE_VERIFIED.LABEL")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("checked",t.userRequest.mobile_verified),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",i["\u0275\u0275pipeBind1"](42,55,"USER.MOBILE_VERIFIED.LABEL"),"?"),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.userError.mobile_verified),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](47,57,"USER.PASSWORD.LABEL")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.userRequest.password)("required",!t.isEdit),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",l.valid||l.pristine),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](52,59,"USER.PASSWORD.VALIDATION")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.userError.password),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](57,61,"USER.ROLES.LABEL")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.userRequest.roles),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.userRoles),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",t.userError.roles),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](65,63,"USER.IMAGE.LABEL")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",t.userError.image),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](71,65,"USER.LANGUAGE.LABEL")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngModel",t.userRequest.language),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("hidden",s.valid||s.pristine),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](76,67,"USER.LANGUAGE.VALIDATION")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",t.userError.language),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",!e.form.valid||t.showProgressButton)("nbSpinner",t.showProgressButton),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](80,69,"COMMON.SAVE")," "),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](84,71,"COMMON.BACK")," ")}},directives:[u.o,u.n,u.bb,f.B,f.q,f.r,u.D,f.b,f.x,f.p,f.s,S.l,u.t,u.W,u.l,u.S],pipes:[m.c],encapsulation:2}),e})();const A=[{path:"",component:l,children:[{path:"add",component:q},{path:"list",component:g},{path:"edit/:id",component:q}]}];let C=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.g.forChild(A)],a.g]}),e})();n.d(t,"UsersModule",(function(){return _}));let _=(()=>{class e{}return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.a,C]]}),e})()}}]);