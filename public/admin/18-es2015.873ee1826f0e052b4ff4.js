(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{a1ig:function(e,t,n){"use strict";n.r(t);var r=n("vTDv"),i=n("tyNb"),a=n("fXoL");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["products"]],decls:1,vars:0,template:function(e,t){1&e&&a["\u0275\u0275element"](0,"router-outlet")},directives:[i.h],encapsulation:2}),e})();var l=n("YPVp"),d=n("CdOr"),s=n("X7vD"),c=n("aceb"),p=n("RS3s"),m=n("sYmb");let u=(()=>{class e extends l.a{constructor(e,t,n){super(t),this.client=e,this.coreService=t,this.route=n,this.columns=[{key:"title",translation_key:"PRODUCT.FIELDS.TITLE.LABEL",column:{title:"",type:"string"}}],this.editPageUrl="pages/products/edit"}ngOnInit(){let e=this.route.snapshot.queryParamMap.get("vendor"),t=e?this.client.getBaseEndpoint()+"?vendor="+e:this.client.getBaseEndpoint();super.ngOnInit(t)}downloadCsvTemplate(){window.location.href=this.client.getBaseEndpoint()+"/download-template-file"}importCsv(){this.coreService.router.navigate(["pages/products/import"])}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["list"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:6,consts:[["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"settings","source","delete","edit"]],template:function(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"nb-card"),a["\u0275\u0275elementStart"](1,"nb-card-header"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"nb-card-body",0),a["\u0275\u0275element"](5,"div"),a["\u0275\u0275elementStart"](6,"ng2-smart-table",1),a["\u0275\u0275listener"]("delete",(function(e){return t.onDeleteConfirm(e)}))("edit",(function(e){return t.edit(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"PRODUCT.LABELS.LIST")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("nbSpinner",t.loading),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("settings",t.settings)("source",t.source))},directives:[c.o,c.q,c.n,c.bb,p.b],pipes:[m.c],styles:[".nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%], .nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%], .nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%], .nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translateZ(0)}"]}),e})();var h=n("lJxs");n("HxAg");class g{}class v{constructor(){this.meta={},this.images=[],this.categories=[]}}class S{}var E=n("QNOW"),f=n("cp0P"),b=n("gnPH"),I=n("93Zq"),x=n("3Pt+"),C=n("ofXK"),y=n("c4y/");function O(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275elementStart"](1,"label"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"span",26),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"languageTitle"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"input",27),a["\u0275\u0275elementEnd"]()),2&e){const e=t.index,n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",a["\u0275\u0275pipeBind1"](3,3,"PRODUCT.FIELDS.TITLE.LABEL")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](6,5,n.languages[e])),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("formControlName",e)}}function D(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function F(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275elementStart"](1,"label"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"span",26),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"languageTitle"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"textarea",29),a["\u0275\u0275elementEnd"]()),2&e){const e=t.index,n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",a["\u0275\u0275pipeBind1"](3,3,"PRODUCT.FIELDS.DETAIL.LABEL")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](6,5,n.languages[e])),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("formControlName",e)}}function B(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function _(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"nb-option",30),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"]("",e.title," ")}}function L(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function P(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"nb-option",30),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275property"]("value",e.id),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"]("",e.name," ")}}function R(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function T(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function A(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function w(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"a",31),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("href",null==e.product?null:null==e.product.mediaurls?null:null==e.product.mediaurls.images[0]?null:e.product.mediaurls.images[0].default,a["\u0275\u0275sanitizeUrl"]),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](null==e.product?null:null==e.product.mediaurls?null:null==e.product.mediaurls.images[0]?null:e.product.mediaurls.images[0].default)}}function M(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"label",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](e)}}function q(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275elementStart"](1,"label",40),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"span",26),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"languageTitle"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"input",27),a["\u0275\u0275elementEnd"]()),2&e){const e=t.index,n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",a["\u0275\u0275pipeBind1"](3,3,"PRODUCT.FIELDS.TITLE.LABEL"),"* "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](6,5,n.languages[e])),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("formControlName",e)}}function G(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275elementStart"](1,"label",40),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"span",26),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"languageTitle"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"input",27),a["\u0275\u0275elementEnd"]()),2&e){const e=t.index,n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",a["\u0275\u0275pipeBind1"](3,3,"PRODUCT.FIELDS.TITLE.LABEL"),"* "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](6,5,n.languages[e])),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("formControlName",e)}}function N(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"div",33),a["\u0275\u0275elementStart"](2,"div",0),a["\u0275\u0275elementStart"](3,"div",34),a["\u0275\u0275elementStart"](4,"div",6),a["\u0275\u0275template"](5,G,8,7,"div",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",1),a["\u0275\u0275elementStart"](7,"div",9),a["\u0275\u0275elementStart"](8,"label"),a["\u0275\u0275text"](9),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](11,"input",41),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",42),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275elementStart"](14,"label"),a["\u0275\u0275text"](15),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"button",43),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.index,r=a["\u0275\u0275nextContext"]().index;return a["\u0275\u0275nextContext"]().deleteChoice(r,n)})),a["\u0275\u0275element"](18,"nb-icon",44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.index;var n=null,r=null;const i=null==(n=t.$implicit.get("title"))?null:null==(r=n.get("items"))?null:r.controls;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroupName",e),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",i),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](10,4,"PRODUCT.FIELDS.PRICE.LABEL")),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate1"]("",a["\u0275\u0275pipeBind1"](16,6,"COMMON.DELETE"),"?")}}function U(e,t){if(1&e){const e=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",6),a["\u0275\u0275elementStart"](1,"nb-card"),a["\u0275\u0275elementStart"](2,"nb-card-header"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"button",32),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.index;return a["\u0275\u0275nextContext"]().deleteGroup(n)})),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"nb-card-body"),a["\u0275\u0275elementStart"](9,"div",33),a["\u0275\u0275elementStart"](10,"div",0),a["\u0275\u0275elementStart"](11,"div",34),a["\u0275\u0275elementStart"](12,"div",6),a["\u0275\u0275template"](13,q,8,7,"div",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",0),a["\u0275\u0275elementStart"](15,"div",35),a["\u0275\u0275elementStart"](16,"div",9),a["\u0275\u0275elementStart"](17,"label"),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"input",36),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"div",35),a["\u0275\u0275elementStart"](22,"div",9),a["\u0275\u0275elementStart"](23,"label"),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"input",37),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",38),a["\u0275\u0275elementStart"](28,"nb-card"),a["\u0275\u0275elementStart"](29,"nb-card-header"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"nb-card-body"),a["\u0275\u0275template"](33,N,19,8,"div",39),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"button",23),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](e);const n=t.index;return a["\u0275\u0275nextContext"]().addNewChoice(n)})),a["\u0275\u0275text"](35),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,i=t.index;var n=null,r=null;const o=null==(n=e.get("title"))?null:null==(r=n.get("items"))?null:r.controls;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate2"](" ",a["\u0275\u0275pipeBind1"](4,10,"PRODUCT.FIELDS.ADDON_GROUP.LABEL")," ",i+1," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,12,"PRODUCT.FIELDS.ADDON_GROUP.DELETE.LABEL")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroupName",i),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",o),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](19,14,"PRODUCT.FIELDS.ADDON_GROUP.MIN_CHOICE.LABEL")),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](25,16,"PRODUCT.FIELDS.ADDON_GROUP.MAX_CHOICE.LABEL")),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate1"]("",a["\u0275\u0275pipeBind1"](31,18,"PRODUCT.FIELDS.ADDON_GROUP.CHOICE.LABEL")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",e.get("choiceItems").controls),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](36,20,"PRODUCT.FIELDS.ADDON_GROUP.ADD_CHOICE.LABEL")," ")}}let k=(()=>{class e{constructor(e,t,n,r,i,a){this.client=e,this.coreService=t,this.route=n,this.categoryClient=r,this.vendorClient=i,this.formBuilder=a,this.product=new g,this.productRequest=new v,this.productError=new S,this.showProgress=!1,this.showProgressButton=!1,this.categories=[],this.vendors=[],this.editId=null,this.vendorId=null,this.languages=[],this.languages=t.translationService.languages}ngOnInit(){this.titleGroupForm=this.coreService.translationService.buildFormGroup(null),this.detailGroupForm=this.coreService.translationService.buildFormGroup(null),this.groupForm=this.formBuilder.group({items:this.formBuilder.array([])}),this.editId||(this.groupFormItems=this.groupForm.get("items")),Object(f.a)([this.getCategories(),this.getVendors()]).subscribe(),this.getEditData(),this.vendorId=this.route.snapshot.queryParamMap.get("vendor"),this.productRequest.vendor_id=this.vendorId}getCategories(){return this.categoryClient.all(this.coreService.appConfigService.getConfig().defaultCategoryScope).pipe(Object(h.a)(e=>(this.categories=e,e)))}getVendors(){return this.vendorClient.all().pipe(Object(h.a)(e=>(this.vendors=e,e)))}getEditData(){let e=this.route.snapshot.paramMap.get("id");e&&(this.editId=e,this.getDataById(e).subscribe())}getDataById(e){return this.showProgress=!0,this.client.show(e).pipe(Object(h.a)(e=>{this.showProgress=!1,this.product=e,this.titleGroupForm=this.coreService.translationService.buildFormGroup(this.product.title_translations),this.detailGroupForm=this.coreService.translationService.buildFormGroup(this.product.detail_translations),this.productRequest.price=this.product.vendor_products[0].price,this.productRequest.stock_quantity=this.product.vendor_products[0].price,this.productRequest.vendor_id=this.product.vendor_products[0].vendor_id;let t=[];for(let n=0;n<this.product.categories.length;n++)t.push(this.product.categories[n].id);this.productRequest.categories=t,this.groupFormItems=this.groupForm.get("items");for(let n=0;n<this.product.addon_groups.length;n++)this.groupFormItems.push(this.createGroupItem(this.product.addon_groups[n]));return e}))}saveProduct(){this.showProgressButton=!0;const e=new FormData;e.append("title_translations",this.coreService.translationService.buildRequestParam(this.titleGroupForm)),e.append("detail_translations",this.coreService.translationService.buildRequestParam(this.detailGroupForm)),e.append("price",this.productRequest.price),e.append("stock_quantity",this.productRequest.stock_quantity),e.append("vendor_id",this.productRequest.vendor_id);for(let n=0;n<this.productRequest.categories.length;n++)e.append("categories[]",this.productRequest.categories[n]);const t=this.groupForm.controls.items;for(let n=0;n<t.controls.length;n++){const r=t.controls[n];e.append("addon_groups["+n+"][title_translations]",this.coreService.translationService.buildRequestParam(r.controls.title)),e.append("addon_groups["+n+"][min_choices]",r.controls.min_choice.value),e.append("addon_groups["+n+"][max_choices]",r.controls.max_choice.value);const i=r.controls.choiceItems;for(let t=0;t<i.controls.length;t++){const r=i.controls[t];e.append("addon_groups["+n+"][choices]["+t+"][title_translations]",this.coreService.translationService.buildRequestParam(r.controls.title)),e.append("addon_groups["+n+"][choices]["+t+"][price]",r.controls.price.value)}}for(let n=0;n<this.productRequest.images.length;n++)e.append("images[]",this.productRequest.images[n]);(this.editId?this.client.update(this.editId,e):this.client.store(e)).subscribe(e=>{this.showProgressButton=!1,this.coreService.toastService.showToast(E.b.SUCCESS,"Saved","Saved successfully!"),this.back()},e=>{var t,n,r,i,a,o,l;if(this.showProgressButton=!1,this.coreService.toastService.showToast(E.b.DANGER,"Failed",e.error.message),e.error.errors){let d=e.error.errors;this.productError.title_translations=null===(t=d)||void 0===t?void 0:t.title_translations,this.productError.detail_translations=null===(n=d)||void 0===n?void 0:n.detail_translations,this.productError.price=null===(r=d)||void 0===r?void 0:r.price,this.productError.stock_quantity=null===(i=d)||void 0===i?void 0:i.stock_quantity,this.productError.vendor_id=null===(a=d)||void 0===a?void 0:a.vendor_id,this.productError.categories=null===(o=d)||void 0===o?void 0:o.categories,this.productError.images=null===(l=d)||void 0===l?void 0:l.images}})}back(){this.coreService.location.back()}getTitleItems(){return this.titleGroupForm.get("items")}getDetailItems(){return this.detailGroupForm.get("items")}onImageChanged(e,t){this.productRequest.images[t]=e.target.files[0]}createGroupItem(e){return this.formBuilder.group({title:this.coreService.translationService.buildFormGroup(e.title_translations),min_choice:e.min_choices,max_choice:e.max_choices,choiceItems:this.formBuilder.array(this.createChoiceItem(e))})}createChoiceItem(e){const t=[];for(let n=0;n<e.addon_choices.length;n++)t.push(this.formBuilder.group({title:this.coreService.translationService.buildFormGroup(e.addon_choices[n].title_translations),price:e.addon_choices[n].price}));return t}addNewGroup(){this.groupFormItems.push(this.formBuilder.group({title:this.coreService.translationService.buildFormGroup(null),min_choice:"",max_choice:"",choiceItems:this.formBuilder.array([])}))}addNewChoice(e){this.groupFormItems.at(e).controls.choiceItems.push(this.formBuilder.group({title:this.coreService.translationService.buildFormGroup(null),price:0}))}deleteChoice(e,t){this.groupFormItems.at(e).controls.choiceItems.removeAt(t)}deleteGroup(e){this.groupFormItems.removeAt(e)}getFormGroupItems(){return this.groupForm.get("items")}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](i.a),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](I.a),a["\u0275\u0275directiveInject"](x.d))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["save"]],decls:89,vars:64,consts:[[1,"row"],[1,"col-md-12"],["nbSpinnerStatus","danger",3,"nbSpinner"],[3,"ngSubmit"],["form","ngForm"],[3,"formGroup"],["formArrayName","items"],["class","form-group",4,"ngFor","ngForOf"],["class","error text-danger",4,"ngFor","ngForOf"],[1,"form-group"],["fullWidth","","name","categories","multiple","",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],["roles","ngModel"],[3,"value",4,"ngFor","ngForOf"],["fullWidth","","name","vendor_id",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],["vendor_id","ngModel"],["type","number","nbInput","","fullWidth","","placeholder","Price","name","price","required","",3,"ngModel","ngModelChange"],["price","ngModel"],[1,"error","text-danger",3,"hidden"],["type","number","nbInput","","fullWidth","","placeholder","Stock Quantity","name","stock_quantity","required","",3,"ngModel","ngModelChange"],["stock_quantity","ngModel"],["type","file","nbInput","","fullWidth","",3,"change"],["target","_blank",3,"href",4,"ngIf"],["formArrayName","items",4,"ngFor","ngForOf"],["type","button","nbButton","","status","info","size","medium",1,"float-lg-right",3,"click"],["type","submit","nbButton","","status","success","size","medium","nbSpinnerStatus","success","nbSpinnerSize","small",3,"disabled","nbSpinner"],["type","button","nbButton","","status","danger","size","medium",3,"click"],[1,"language-label"],["type","text","nbInput","","fullWidth","","required","",3,"formControlName"],[1,"error","text-danger"],["nbInput","","fullWidth","","required","",3,"formControlName"],[3,"value"],["target","_blank",3,"href"],["type","button","nbButton","","status","danger","size","small",1,"float-lg-right",3,"click"],[3,"formGroupName"],["formGroupName","title",1,"col-md-12"],[1,"col-md-6"],["type","text","nbInput","","fullWidth","","formControlName","min_choice"],["type","text","nbInput","","fullWidth","","formControlName","max_choice"],["formArrayName","choiceItems"],[4,"ngFor","ngForOf"],["for","title"],["type","text","nbInput","","fullWidth","","formControlName","price"],[1,"col-md-2"],["nbInput","","fullWidth","","type","button","nbButton","","status","danger","size","small",3,"click"],["icon","trash-2-outline"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"nb-card"),a["\u0275\u0275elementStart"](3,"nb-card-body",2),a["\u0275\u0275elementStart"](4,"form",3,4),a["\u0275\u0275listener"]("ngSubmit",(function(){return t.saveProduct()})),a["\u0275\u0275elementStart"](6,"div",0),a["\u0275\u0275elementStart"](7,"div",1),a["\u0275\u0275elementStart"](8,"nb-card"),a["\u0275\u0275elementStart"](9,"nb-card-header"),a["\u0275\u0275text"](10),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"nb-card-body"),a["\u0275\u0275elementStart"](13,"div",5),a["\u0275\u0275elementStart"](14,"div",6),a["\u0275\u0275template"](15,O,8,7,"div",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](16,D,2,1,"label",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",0),a["\u0275\u0275elementStart"](18,"div",1),a["\u0275\u0275elementStart"](19,"nb-card"),a["\u0275\u0275elementStart"](20,"nb-card-header"),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"nb-card-body"),a["\u0275\u0275elementStart"](24,"div",5),a["\u0275\u0275elementStart"](25,"div",6),a["\u0275\u0275template"](26,F,8,7,"div",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](27,B,2,1,"label",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",9),a["\u0275\u0275elementStart"](29,"label"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"nb-select",10,11),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.productRequest.categories=e})),a["\u0275\u0275template"](34,_,2,2,"nb-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](35,L,2,1,"label",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"div",9),a["\u0275\u0275elementStart"](37,"label"),a["\u0275\u0275text"](38),a["\u0275\u0275pipe"](39,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](40,"nb-select",13,14),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.productRequest.vendor_id=e})),a["\u0275\u0275template"](42,P,2,2,"nb-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](43,R,2,1,"label",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](44,"div",9),a["\u0275\u0275elementStart"](45,"label"),a["\u0275\u0275text"](46),a["\u0275\u0275pipe"](47,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"input",15,16),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.productRequest.price=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"label",17),a["\u0275\u0275text"](51),a["\u0275\u0275pipe"](52,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](53,T,2,1,"label",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](54,"div",9),a["\u0275\u0275elementStart"](55,"label"),a["\u0275\u0275text"](56),a["\u0275\u0275pipe"](57,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"input",18,19),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.productRequest.stock_quantity=e})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](60,"label",17),a["\u0275\u0275text"](61),a["\u0275\u0275pipe"](62,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](63,A,2,1,"label",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](64,"div",9),a["\u0275\u0275elementStart"](65,"label"),a["\u0275\u0275text"](66),a["\u0275\u0275pipe"](67,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](68,"input",20),a["\u0275\u0275listener"]("change",(function(e){return t.onImageChanged(e,0)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](69,w,2,2,"a",21),a["\u0275\u0275template"](70,M,2,1,"label",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](71,"div",0),a["\u0275\u0275elementStart"](72,"div",1),a["\u0275\u0275elementStart"](73,"nb-card",5),a["\u0275\u0275elementStart"](74,"nb-card-header"),a["\u0275\u0275text"](75),a["\u0275\u0275pipe"](76,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](77,"nb-card-body"),a["\u0275\u0275template"](78,U,37,22,"div",22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](79,"button",23),a["\u0275\u0275listener"]("click",(function(){return t.addNewGroup()})),a["\u0275\u0275text"](80),a["\u0275\u0275pipe"](81,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](82,"button",24),a["\u0275\u0275text"](83),a["\u0275\u0275pipe"](84,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](85," \xa0 "),a["\u0275\u0275elementStart"](86,"button",25),a["\u0275\u0275listener"]("click",(function(){return t.back()})),a["\u0275\u0275text"](87),a["\u0275\u0275pipe"](88,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275reference"](5),n=a["\u0275\u0275reference"](49),r=a["\u0275\u0275reference"](59);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("nbSpinner",t.showProgress),a["\u0275\u0275advance"](7),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](11,38,"PRODUCT.FIELDS.TITLE.HEADER")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.titleGroupForm),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.getTitleItems().controls),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.productError.title_translations),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](22,40,"PRODUCT.FIELDS.DETAIL.HEADER")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.detailGroupForm),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.getDetailItems().controls),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.productError.detail_translations),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](31,42,"PRODUCT.FIELDS.CATEGORY.LABEL")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",t.productRequest.categories),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.categories),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.productError.categories),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](39,44,"PRODUCT.FIELDS.VENDOR.LABEL")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",t.productRequest.vendor_id),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.vendors),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.productError.categories),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](47,46,"PRODUCT.FIELDS.PRICE.LABEL")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",t.productRequest.price),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("hidden",n.valid||n.pristine),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](52,48,"PRODUCT.FIELDS.PRICE.VALIDATION")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.productError.price),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](57,50,"PRODUCT.FIELDS.STOCK_QUANTITY.LABEL")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",t.productRequest.stock_quantity),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("hidden",r.valid||r.pristine),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](62,52,"PRODUCT.FIELDS.STOCK_QUANTITY.VALIDATION")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.productError.stock_quantity),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](67,54,"PRODUCT.FIELDS.IMAGE.LABEL")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",(null==t.product?null:null==t.product.mediaurls?null:null==t.product.mediaurls.images?null:t.product.mediaurls.images.length)>0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",t.productError.images),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",t.groupForm),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](76,56,"PRODUCT.FIELDS.ADDON_GROUP.HEADER")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",t.getFormGroupItems().controls),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](81,58,"PRODUCT.FIELDS.ADDON_GROUP.ADD_GROUP.LABEL")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",!e.form.valid||t.showProgressButton)("nbSpinner",t.showProgressButton),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](84,60,"COMMON.SAVE")," "),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](88,62,"COMMON.BACK")," ")}},directives:[c.o,c.n,c.bb,x.B,x.q,x.r,c.q,x.h,x.c,C.l,c.W,x.p,x.s,x.u,c.D,x.b,x.x,C.m,c.l,x.g,c.S,x.i,c.A],pipes:[m.c,y.a],encapsulation:2}),e})();const j=[{path:"",component:o,children:[{path:"add",component:k},{path:"list",component:u},{path:"edit/:id",component:k},{path:"import",component:(()=>{class e{constructor(e,t){this.coreService=e,this.productClient=t,this.showProgressButton=!1}import(){const e=new FormData;e.append("csv",this.file),this.productClient.import(e).subscribe(e=>{this.coreService.toastService.showToast(E.b.SUCCESS,"Imported","Import successfully!"),this.back()},e=>{this.coreService.toastService.showToast(E.b.DANGER,"Import Failed","Unable to import!")})}onImportFileChanged(e){this.file=e.target.files[0]}back(){this.coreService.location.back()}}return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["product-import"]],decls:18,vars:11,consts:[[1,"row"],[1,"col-md-12"],[3,"ngSubmit"],["form","ngForm"],[1,"form-group"],["type","file","nbInput","","fullWidth","",3,"change"],["type","submit","nbButton","","status","success","size","medium","nbSpinnerStatus","success","nbSpinnerSize","small",3,"disabled","nbSpinner"],["type","button","nbButton","","status","danger","size","medium",3,"click"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"nb-card"),a["\u0275\u0275elementStart"](3,"nb-card-body"),a["\u0275\u0275elementStart"](4,"form",2,3),a["\u0275\u0275listener"]("ngSubmit",(function(){return t.import()})),a["\u0275\u0275elementStart"](6,"div",4),a["\u0275\u0275elementStart"](7,"label"),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"input",5),a["\u0275\u0275listener"]("change",(function(e){return t.onImportFileChanged(e)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"button",6),a["\u0275\u0275text"](12),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](14," \xa0 "),a["\u0275\u0275elementStart"](15,"button",7),a["\u0275\u0275listener"]("click",(function(){return t.back()})),a["\u0275\u0275text"](16),a["\u0275\u0275pipe"](17,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){const e=a["\u0275\u0275reference"](5);a["\u0275\u0275advance"](8),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](9,5,"PRODUCT.FIELDS.IMPORT_FILE.LABEL")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",!e.form.valid||t.showProgressButton)("nbSpinner",t.showProgressButton),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](13,7,"COMMON.IMPORT_FILE")," "),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](17,9,"COMMON.BACK")," ")}},directives:[c.o,c.n,x.B,x.q,x.r,c.D,c.l,c.bb],pipes:[m.c],encapsulation:2}),e})()}]}];let W=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.g.forChild(j)],i.g]}),e})();n.d(t,"ProductsModule",(function(){return z}));let z=(()=>{class e{}return e.\u0275mod=a["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.a,W]]}),e})()}}]);