[2023-01-22 20:16:03] local.ERROR: fopen(/var/www/doctoworld/public/storage/1/1674418559100.jpeg): failed to open stream: Permission denied {"userId":5,"exception":"[object] (ErrorException(code: 0): fopen(/var/www/doctoworld/public/storage/1/1674418559100.jpeg): failed to open stream: Permission denied at /var/www/doctoworld/vendor/league/flysystem/src/Adapter/Local.php:157)
[stacktrace]
#0 [internal function]: Illuminate\\Foundation\\Bootstrap\\HandleExceptions->handleError(2, 'fopen(/var/www/...', '/var/www/doctow...', 157, Array)
#1 /var/www/doctoworld/vendor/league/flysystem/src/Adapter/Local.php(157): fopen('/var/www/doctow...', 'w+b')
#2 /var/www/doctoworld/vendor/league/flysystem/src/Filesystem.php(123): League\\Flysystem\\Adapter\\Local->writeStream('1/1674418559100...', Resource id #48, Object(League\\Flysystem\\Config))
#3 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Filesystem/FilesystemAdapter.php(224): League\\Flysystem\\Filesystem->putStream('1/1674418559100...', Resource id #48, Object(League\\Flysystem\\Config))
#4 /var/www/doctoworld/vendor/spatie/laravel-medialibrary/src/Filesystem/Filesystem.php(79): Illuminate\\Filesystem\\FilesystemAdapter->put('1/1674418559100...', Resource id #48)
#5 /var/www/doctoworld/vendor/spatie/laravel-medialibrary/src/Filesystem/Filesystem.php(31): Spatie\\MediaLibrary\\Filesystem\\Filesystem->copyToMediaLibrary('/tmp/media-libr...', Object(Spatie\\MediaLibrary\\Models\\Media), NULL, '1674418559100.j...')
#6 /var/www/doctoworld/vendor/spatie/laravel-medialibrary/src/FileAdder/FileAdder.php(378): Spatie\\MediaLibrary\\Filesystem\\Filesystem->add('/tmp/media-libr...', Object(Spatie\\MediaLibrary\\Models\\Media), '1674418559100.j...')
#7 /var/www/doctoworld/vendor/spatie/laravel-medialibrary/src/FileAdder/FileAdder.php(364): Spatie\\MediaLibrary\\FileAdder\\FileAdder->processMediaItem(Object(Vtlabs\\Core\\Models\\User\\User), Object(Spatie\\MediaLibrary\\Models\\Media), Object(Spatie\\MediaLibrary\\FileAdder\\FileAdder))
#8 /var/www/doctoworld/vendor/spatie/laravel-medialibrary/src/FileAdder/FileAdder.php(314): Spatie\\MediaLibrary\\FileAdder\\FileAdder->attachMedia(Object(Spatie\\MediaLibrary\\Models\\Media))
#9 /var/www/doctoworld/vendor/vtlabs/core/src/Http/Controllers/Api/UserController.php(88): Spatie\\MediaLibrary\\FileAdder\\FileAdder->toMediaCollection('images')
#10 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Controller.php(54): Vtlabs\\Core\\Http\\Controllers\\Api\\UserController->update(Object(Illuminate\\Http\\Request))
#11 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('update', Array)
#12 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(Vtlabs\\Core\\Http\\Controllers\\Api\\UserController), 'update')
#13 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Route.php(176): Illuminate\\Routing\\Route->runController()
#14 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Router.php(681): Illuminate\\Routing\\Route->run()
#15 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(130): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 /var/www/doctoworld/vendor/vtlabs/core/src/Http/Middleware/DetectLocale.php(24): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#17 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Vtlabs\\Core\\Http\\Middleware\\DetectLocale->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#18 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(41): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#19 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#20 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(43): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#21 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Illuminate\\Auth\\Middleware\\Authenticate->handle(Object(Illuminate\\Http\\Request), Object(Closure), 'api')
#22 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Middleware/ThrottleRequests.php(59): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#23 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Illuminate\\Routing\\Middleware\\ThrottleRequests->handle(Object(Illuminate\\Http\\Request), Object(Closure), 60, '1')
#24 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(105): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#25 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Router.php(683): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#26 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Router.php(658): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#27 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Router.php(624): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#28 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Routing/Router.php(613): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#29 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(170): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#30 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(130): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#31 /var/www/doctoworld/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(67): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#32 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#33 /var/www/doctoworld/vendor/spatie/laravel-cors/src/Cors.php(41): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#34 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Spatie\\Cors\\Cors->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#35 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#36 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#37 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#38 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#39 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#40 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#41 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/CheckForMaintenanceMode.php(63): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#42 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(171): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#43 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(105): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#44 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(145): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#45 /var/www/doctoworld/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(110): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#46 /var/www/doctoworld/public/index.php(53): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#47 {main}
"} 
